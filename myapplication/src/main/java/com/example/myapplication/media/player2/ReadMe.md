# 音频播放器设计
## 设计目标
1. 音频播放器提供啫喱 app 内所有关于音频播放的需求
2. 该模块是一个基础服务模块，支持 NA 的直接调用，同时支持 Zap 协议调用
3. 核心实现：（1）多个音乐源的互斥、叠加逻辑 （2）分场景的共存逻辑，场景之间相互不干扰 （3）自动缓存远程音乐源
4. 功能扩展：（1）列表循环播放
## 设计原理（核心难点）
1. 叠加：模拟音轨，通过 zIndex 映射一个 player 实例，zIndex 不同，则对应的音乐源可以叠加播放
2. 互斥：权重逻辑，通过 为音乐源绑定 weight，则在同一个 zIndex 的 player 下，可以覆盖音乐源
3. 音乐：所有的音乐源都是以列表形式存在，底层播放器按照列表纬度进行播放，单一音乐也被处理成列表
## 代码结构
## 使用示例
## 注意事项
1. 场景、zIndex 和 weight 唯一确定一个 player
2. 可以进行场景纬度的停止（stop）操作，也可以全局 停止（stopAll）所有场景 player
3. 只能在场景和 zIndex 组合下进行播放（play），不支持按照 场景 进行 play，原因：每个场景下有独立的互斥和叠加逻辑